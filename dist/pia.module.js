/**!
 * Pia JS v0.0.4
 * @author phucbm
 * @homepage https://github.com/phucbm/pia
 * @license MIT 2023
 */
function e(e){return Date.parse("string"==typeof e?e:e.toString())}function t(t,n,r){return Math.floor(function(t,n){return e(n)-e(t)}(t,n)/function(e=""){const t=36e5,n={second:1e3,minute:6e4,hour:t,day:24*t,year:31536e6};return["year","day","hour","minute","second"].includes(e)?n[e]:n}(r))}function n(e){if(!e)return!0;return!["session","never"].includes(e.expires)&&function(e){const t=r(e);if(null===t)return!1;const n=e.expires;return t>n}(e)}function r(e,n=void 0){n=n||e.unit;return["ms","second","minute","hour","day"].includes(n)?t(new Date(e.createdDate),new Date,n):null}function o(e,t=!1){let r=localStorage.getItem(e);if(null===r&&(r=sessionStorage.getItem(e)),null===r)return r;const o=JSON.parse(r);return n(o)?(s(o.key,o.storageType),null):t?o:o.value}function s(e,t="localStorage"){"sessionStorage"===t?sessionStorage.removeItem(e):localStorage.removeItem(e)}window.Pia=new class{constructor(){}isExpired(e){return n(o(e))}set(e,t,n={}){const r={expires:"never",unit:"day",...n},u=function(e){return!!["hour","day"].includes(e)&&e}(r.unit),i=function(e,t){if("string"==typeof e)return["session","tab","current-tab"].includes(e)?"session":"never";return"number"==typeof e&&parseInt(e)}(r.expires),a=function(e){return"session"===e?"sessionStorage":"localStorage"}(i);!function(e,t){const n=t.storageType,r=JSON.stringify(t),u=o(e);null!==u&&u.storageType!==n&&s(e);"sessionStorage"===n?sessionStorage.setItem(e,r):localStorage.setItem(e,r)}(e,{key:e,valueType:typeof t,value:t,expires:i,unit:u,storageType:a,arguments,createdDate:(new Date).toString()})}get(e,t=!1){return o(e,t)}remove(e){return s(e)}test(e,t=!1){const n=o(e,!0);let s;const u=[];return n?("number"==typeof n.expires?(u.push(`${n.expires-r(n)} ${n.unit}(s) left`),["second","minute","hour","day"].forEach((e=>{u.push(`created ${r(n,e)} ${e}(s) ago`)}))):u.push(n.expires),s={leftover:u,record:n}):s=`Record "${e}" not found.`,t&&(console.group("Test record:",e),console.table(u),console.log("record",n),console.groupEnd()),s}};